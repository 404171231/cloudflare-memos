import{j as e}from"./radix-vendor-C59FrWl4.js";import{o as r}from"./mobx-vendor-DqSTJMYi.js";import{r as s}from"./leaflet-vendor-lQi0KVke.js";import{a,g as t,d as o,i,L as n}from"./index-DbdC5ZdO.js";import{l as d}from"./utils-vendor-DZvAiLrS.js";import{u as l}from"./router-vendor-CwTeFqe9.js";import"./mermaid-vendor-Bc-icxuX.js";import"./i18n-vendor-U-o9p_NC.js";import"./highlight-vendor-CXi3tuUt.js";import"./katex-vendor-DMFz0ZL2.js";const m=r(()=>{const r=a(),[m]=l(),[c,p]=s.useState({loading:!0,errorMessage:""});return s.useEffect(()=>{const e=m.get("code"),s=m.get("state");if(!e||!s)return void p({loading:!1,errorMessage:"Failed to authorize. Invalid state passed to the auth callback."});const a=Number(d(s.split("-")));if(!a)return void p({loading:!1,errorMessage:"No identity provider ID found in the state parameter."});const n=t("/auth/callback");(async()=>{try{await o.createSession({ssoCredentials:{idpId:a,code:e,redirectUri:n}}),p({loading:!1,errorMessage:""}),await i(),r("/")}catch(s){p({loading:!1,errorMessage:s.details})}})()},[m]),e.jsx("div",{className:"p-4 py-24 w-full h-full flex justify-center items-center",children:c.loading?e.jsx(n,{className:"animate-spin text-foreground"}):e.jsx("div",{className:"max-w-lg font-mono whitespace-pre-wrap opacity-80",children:c.errorMessage})})});export{m as default};
