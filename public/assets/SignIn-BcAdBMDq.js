import{j as e}from"./radix-vendor-C59FrWl4.js";import{o as s}from"./mobx-vendor-DqSTJMYi.js";import{r as t}from"./leaflet-vendor-lQi0KVke.js";import{u as o,e as r,w as i,R as a,r as l,B as n,z as c,C as m,D as d,g as u,n as f}from"./index-DbdC5ZdO.js";import{A as x}from"./AuthFooter-BEQO6_1V.js";import{P as p}from"./PasswordSignInForm-DB4wwa5A.js";import{L as h}from"./router-vendor-CwTeFqe9.js";import"./mermaid-vendor-Bc-icxuX.js";import"./i18n-vendor-U-o9p_NC.js";import"./utils-vendor-DZvAiLrS.js";import"./highlight-vendor-CXi3tuUt.js";import"./katex-vendor-DMFz0ZL2.js";import"./ThemeSelect-2RBX34Tf.js";const j=s(()=>{const s=o(),j=r(),[w,g]=t.useState([]),v=i.state.generalSetting;t.useEffect(()=>{j&&(window.location.href=a.ROOT)},[]),t.useEffect(()=>{(async()=>{const{identityProviders:e}=await c.listIdentityProviders({});g(e)})()},[]);return e.jsxs("div",{className:"py-4 sm:py-8 w-80 max-w-full min-h-svh mx-auto flex flex-col justify-start items-center",children:[e.jsxs("div",{className:"w-full py-4 grow flex flex-col justify-center items-center",children:[e.jsxs("div",{className:"w-full flex flex-row justify-center items-center mb-6",children:[e.jsx("img",{className:"h-14 w-auto rounded-full shadow",src:v.customProfile?.logoUrl||"/logo.webp",alt:""}),e.jsx("p",{className:"ml-2 text-5xl text-foreground opacity-80",children:v.customProfile?.title||"Memos"})]}),v.disallowPasswordAuth?0==w.length&&e.jsx("p",{className:"w-full text-2xl mt-2 text-muted-foreground",children:"Password auth is not allowed."}):e.jsx(p,{}),!v.disallowUserRegistration&&!v.disallowPasswordAuth&&e.jsxs("p",{className:"w-full mt-4 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:s("auth.sign-up-tip")}),e.jsx(h,{to:"/auth/signup",className:"cursor-pointer ml-2 text-primary hover:underline",viewTransition:!0,children:s("common.sign-up")})]}),w.length>0&&e.jsxs(e.Fragment,{children:[!v.disallowPasswordAuth&&e.jsxs("div",{className:"relative my-4 w-full",children:[e.jsx(l,{}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"bg-background px-2 text-xs text-muted-foreground",children:s("common.or")})})]}),e.jsx("div",{className:"w-full flex flex-col space-y-2",children:w.map(t=>e.jsx(n,{className:"bg-background w-full",variant:"outline",onClick:()=>(async e=>{const s=`auth.signin.${e.title}-${m(e.name)}`;if(e.type===d.OAUTH2){const t=u("/auth/callback"),o=e.config?.oauth2Config;if(!o)return void f.error("Identity provider configuration is invalid.");const r=`${o.authUrl}?client_id=${o.clientId}&redirect_uri=${encodeURIComponent(t)}&state=${s}&response_type=code&scope=${encodeURIComponent(o.scopes.join(" "))}`;window.location.href=r}})(t),children:s("common.sign-in-with",{provider:t.title})},t.name))})]})]}),e.jsx(x,{})]})});export{j as default};
