import{j as e}from"./radix-vendor-C59FrWl4.js";import{u as s,b as t,H as r,n as a,f as i,m as o,B as n,J as l,P as m,v as c,S as d,M as u,K as f}from"./index-DbdC5ZdO.js";import{a2 as x}from"./mermaid-vendor-Bc-icxuX.js";import{o as p}from"./mobx-vendor-DqSTJMYi.js";import{r as j}from"./leaflet-vendor-lQi0KVke.js";import{E as h}from"./external-link-Dr2ZROZU.js";import{a as y}from"./router-vendor-CwTeFqe9.js";import"./i18n-vendor-U-o9p_NC.js";import"./utils-vendor-DZvAiLrS.js";import"./highlight-vendor-CXi3tuUt.js";import"./katex-vendor-DMFz0ZL2.js";const v=p(()=>{const p=s(),v=y(),w=t(),[g,N]=j.useState();j.useEffect(()=>{const e=v.username;if(!e)throw new Error("username is required");r.getOrFetchUserByUsername(e).then(e=>{N(e),w.setFinish()}).catch(e=>{a.error(p("message.user-not-found"))})},[v.username]);const T=j.useMemo(()=>{if(!g)return;const e=[`creator_id == ${i(g.name)}`];for(const s of o.filters)"contentSearch"===s.factor?e.push(`content.contains("${s.value}")`):"tagSearch"===s.factor&&e.push(`tag in ["${s.value}"]`);return e.length>0?e.join(" && "):void 0},[g,o.filters]);return e.jsx("section",{className:"w-full max-w-3xl mx-auto min-h-full flex flex-col justify-start items-center pb-8",children:e.jsx("div",{className:"w-full flex flex-col justify-start items-center max-w-2xl",children:!w.isLoading&&(g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 w-full flex justify-end items-center gap-2",children:e.jsxs(n,{variant:"outline",onClick:()=>{g&&(f(`${window.location.origin}/u/${encodeURIComponent(g.username)}`),a.success(p("message.copied")))},children:[p("common.share"),e.jsx(h,{className:"ml-1 w-4 h-auto opacity-60"})]})}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start pt-4 pb-8 px-3",children:[e.jsx(l,{className:"w-16! h-16! drop-shadow rounded-3xl",avatarUrl:g?.avatarUrl}),e.jsxs("div",{className:"mt-2 w-auto max-w-[calc(100%-6rem)] flex flex-col justify-center items-start",children:[e.jsx("p",{className:"w-full text-3xl text-foreground leading-tight font-medium opacity-80 truncate",children:g.displayName||g.username}),e.jsx("p",{className:"w-full text-muted-foreground leading-snug whitespace-pre-wrap truncate line-clamp-6",children:g.description})]})]}),e.jsx(m,{renderer:s=>e.jsx(u,{memo:s,showVisibility:!0,showPinned:!0,compact:!0},`${s.name}-${s.displayTime}`),listSort:e=>e.filter(e=>e.state===d.NORMAL).sort((e,s)=>c.state.orderByTimeAsc?x(e.displayTime).unix()-x(s.displayTime).unix():x(s.displayTime).unix()-x(e.displayTime).unix()),orderBy:c.state.orderByTimeAsc?"display_time asc":"display_time desc",filter:T})]}):e.jsx("p",{children:"Not found"}))})})});export{v as default};
